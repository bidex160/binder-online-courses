import{A as u,E as C,J as n,K as s,L as M,M as _,N as P,O as T,P as I,Q as g,Qa as B,S as l,Ta as E,U as v,Ua as N,Za as D,_a as L,aa as F,ba as O,ca as j,f as h,i as S,ib as z,j as d,jb as V,l as w,m as k,ma as y,t as m,ta as b,u as f}from"./chunk-BIMTVSHJ.js";import{e as x}from"./chunk-YHOLSLLF.js";function U(e,t){if(e&1&&(_(0),M(1,"app-course",6),P()),e&2){let p=t.$implicit,o=g();m(),u("course",p)("actions",o.actions)}}function $(e,t){if(e&1){let p=T();n(0,"div",7)(1,"h3"),l(2,"CART TOTALS"),s(),n(3,"p"),l(4," Subtotal "),n(5,"span"),l(6),s()(),n(7,"h2"),l(8," Total "),n(9,"span"),l(10),s()(),n(11,"app-button",8),I("mclick",function(){w(p);let i=g();return k(i.proceedToCheckout())}),s()()}if(e&2){let p=g();m(6),v(" \u20B9 ",p.totalPrice," "),m(4),v(" \u20B9 ",p.totalPrice," "),m(),u("type","primary")}}var A=(()=>{let t=class t{constructor(o,i,c){this.storageService=o,this.utils=i,this.dialog=c,this.courses=[],this.actions=[{text:"Move to wishlist",type:"primary",action:a=>this.moveToWishList(a)},{text:"Delete the course",type:"primary",action:a=>this.removeFromCart(a)}],this.removeFromCart=a=>x(this,null,function*(){this.utils.removeFromCart(a).then(r=>{this.courses=r.courses,this.utils.showSnackBar(r.message,"success")}).catch(r=>{this.utils.showSnackBar(r.message,"warning")})}),this.moveToWishList=a=>{this.utils.addToWishList(a).then(r=>{this.utils.showSnackBar(r.message,"success")}).catch(r=>{this.utils.showSnackBar(r.message,"warning")})}}ngOnInit(){this.fetchCartCourses()}fetchCartCourses(){let o=this.storageService.getItem("cart");this.courses=o||[]}proceedToCheckout(){this.dialog.open(z,{width:"40vw",height:"auto",data:{type:1,message:"Order Placed Succesfully!"}}).afterClosed().subscribe(o=>{o&&this.utils.emptyCart().then(i=>{this.fetchCartCourses()}).catch(i=>{this.utils.showSnackBar("Please try again","danger")})})}get totalPrice(){return this.courses.reduce((o,i)=>{let c=parseFloat(i.actualPrice.slice(1));return o+c},0)}};t.\u0275fac=function(i){return new(i||t)(f(b),f(B),f(D))},t.\u0275cmp=S({type:t,selectors:[["app-checkout"]],decls:7,vars:2,consts:[[1,"banner"],[1,"row","d-flex","checkout"],[1,"col-md-7","courses"],[4,"ngFor","ngForOf"],[1,"col-md-2"],["class","",4,"ngIf"],[3,"course","actions"],[1,""],["text","Proceed to Checkout",3,"type","mclick"]],template:function(i,c){i&1&&(n(0,"div",0),l(1,"Checkout"),s(),n(2,"div",1)(3,"div",2),C(4,U,2,2,"ng-container",3),s(),n(5,"div",4),C(6,$,12,3,"div",5),s()()),i&2&&(m(4),u("ngForOf",c.courses),m(2),u("ngIf",c.courses==null?null:c.courses.length))},dependencies:[F,O,N,E],styles:["@media (min-width: 768px){.courses[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important}}h3[_ngcontent-%COMP%]{font-size:.75rem;color:#000;text-align:end}h2[_ngcontent-%COMP%]{font-size:.95rem;color:#000;font-weight:800;display:flex;justify-content:space-between}p[_ngcontent-%COMP%]{font-size:.8rem;color:#000;font-weight:400;display:flex;justify-content:space-between}.checkout[_ngcontent-%COMP%]{margin:4rem 0}"]});let e=t;return e})();var q=[{path:"",component:A}],R=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=d({type:t}),t.\u0275inj=h({imports:[y.forChild(q),y]});let e=t;return e})();var lt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=d({type:t}),t.\u0275inj=h({imports:[j,V,R,L]});let e=t;return e})();export{lt as CheckoutModule};
